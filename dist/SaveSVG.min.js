//  v1.0.0 Copyright 2020 Akul Mehta
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).SaveSVG={})}(this,(function(t){"use strict";var e={data:""},i={data:[]};async function n(t){var i=window.location.href;(i=i.split("/")).pop(),i=i.join("/"),i+="/";await function(t){return new Promise((function(e,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(200==n.status?e(n.responseText):i(n))},n.open("GET",t),n.overrideMimeType("text/plain; charset=x-user-defined"),n.send()}))}(i+t).then((function(t){e.data+=t})).catch((function(t){}))}function r(t){e.data.replace(/\/\*.*\*\//g,"").replace(/\r?\n|\r/g,"").split("}").forEach((function(e){if(""!=e.trim()){var i=e.split("{"),n=i[0].trim();i[1].split(";").forEach((function(e){if(""!=e.trim()){var i=e.split(":"),r=i[0].trim(),a=i[1].trim();"font-weight"==r?d3.select("#"+t).selectAll(n).each((function(t,e){this.getAttribute(r)||this.style[r]===a||d3.select(this).style(r+"",a+"")})):d3.select("#"+t).selectAll(n).each((function(t,e){this.getAttribute(r)||this.style[r]||d3.select(this).style(r+"",a+"")}))}}))}}))}async function a(t){await d3.xml(t).then((function(t){return i.data=[].map.call(t.querySelectorAll("symbol"),(function(t){return{id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),innerhtml:t.innerHTML.replace(/\n|\t/g,"").trim()}})),i.data}))}async function l(t){d3.selectAll(`#${t} use`).each((function(t){var e=this.getAttribute("href");if(null===e&&(e=this.getAttribute("xlink:href")),null!==e){var n={id:e.split("#")[1],x:this.getAttribute("x"),y:this.getAttribute("y"),height:this.getAttribute("height"),width:this.getAttribute("width")},r=i.data.find(t=>t.id==n.id);d3.select(this.parentNode).append("svg").attr("id",n.id).attr("x",n.x).attr("y",n.y).attr("height",n.height).attr("width",n.width).attr("viewBox",r.viewBox).html(r.innerhtml).lower()}})).remove()}t.readCSSFile=n,t.readUSE=a,t.replacecss=r,t.replaceuse=l,t.save=async function(t,e,i){null!==e&&(await n(e),r(t)),null!==i&&(await a(i),l(t));var s=document.getElementById(t);s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),s=document.getElementById(t).outerHTML;var o=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),c=URL.createObjectURL(o),d=document.createElement("a");d.href=c,d.download="Figure.svg",document.body.appendChild(d),d.click(),document.body.removeChild(d)},t.svgStyle=e,t.useArr=i,Object.defineProperty(t,"__esModule",{value:!0})}));
